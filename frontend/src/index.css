@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   GENESIS - Estilos Base
   ======================================== */

@layer base {
  :root {
    --color-brand-primary: #d4814b;
    --color-navy-primary: #1e3a5f;
    --color-success: #10b981;
    --color-warning: #f59e0b;
    --color-danger: #ef4444;
  }

  * {
    -webkit-tap-highlight-color: transparent;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-gradient-to-br from-slate-925 via-navy-950 to-slate-925;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Scrollbar personalizada */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-slate-800/50 rounded-full;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-brand-500 bg-opacity-50 rounded-full hover:bg-brand-500 hover:bg-opacity-70 transition-colors;
  }

  /* Selection */
  ::selection {
    @apply bg-brand-500 bg-opacity-30 text-white;
  }
}

@layer components {
  /* Cards */
  .card {
    @apply bg-slate-850/80 backdrop-blur-sm rounded-2xl border border-slate-700/50 
           shadow-lg hover:border-brand-500 hover:border-opacity-30 transition-all duration-300;
  }

  .card-interactive {
    @apply card hover:shadow-glow hover:-translate-y-1 cursor-pointer;
  }

  /* Botones */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl 
           font-semibold text-sm transition-all duration-200 
           disabled:opacity-50 disabled:cursor-not-allowed
           focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900;
  }

  .btn-primary {
    @apply btn bg-gradient-to-r from-brand-500 to-brand-600 text-white 
           hover:from-brand-400 hover:to-brand-500 
           focus:ring-brand-500 shadow-lg shadow-brand-500
           active:scale-95;
  }

  .btn-secondary {
    @apply btn bg-slate-700/50 text-slate-200 border border-slate-600
           hover:bg-slate-700 hover:border-slate-500
           focus:ring-slate-500;
  }

  .btn-danger {
    @apply btn bg-red-600/90 text-white hover:bg-red-500 
           focus:ring-red-500 shadow-lg shadow-red-500/20;
  }

  .btn-success {
    @apply btn bg-emerald-600 text-white hover:bg-emerald-500 
           focus:ring-emerald-500 shadow-lg shadow-emerald-500/20;
  }

  .btn-ghost {
    @apply btn bg-transparent text-slate-300 hover:bg-slate-800 hover:text-white;
  }

  .btn-icon {
    @apply btn p-2.5 aspect-square;
  }

  .btn-micro {
    @apply transition-transform duration-150 active:scale-95 hover:scale-105;
  }

  .glass-panel {
    @apply bg-slate-900/60 border border-slate-700/50 backdrop-blur-xl shadow-2xl;
  }

  .message-animate {
    animation: fade-slide-up 220ms ease;
  }

  .btn-lg {
    @apply px-6 py-3.5 text-base rounded-2xl;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs rounded-lg;
  }

  /* Inputs */
  .input {
    @apply w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl
           text-white placeholder:text-slate-500
           focus:outline-none focus:border-brand-500 focus:ring-2 focus:ring-brand-500 focus:ring-opacity-20
           transition-all duration-200;
  }

  .input-lg {
    @apply input text-lg py-4;
  }

  .input-error {
    @apply input border-red-500 focus:border-red-500 focus:ring-red-500/20;
  }

  /* Labels */
  .label {
    @apply block text-sm font-medium text-slate-400 mb-1.5;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold;
  }

  .badge-success {
    @apply badge bg-emerald-500/20 text-emerald-400 border border-emerald-500/30;
  }

  .badge-warning {
    @apply badge bg-amber-500/20 text-amber-400 border border-amber-500/30;
  }

  .badge-danger {
    @apply badge bg-red-500/20 text-red-400 border border-red-500/30;
  }

  .badge-info {
    @apply badge bg-blue-500/20 text-blue-400 border border-blue-500/30;
  }

  .badge-neutral {
    @apply badge bg-slate-600/50 text-slate-300 border border-slate-500/30;
  }

  /* POS Grid - Productos */
  .pos-grid {
    @apply grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3;
  }

  .pos-product-card {
    @apply flex flex-col items-center justify-center p-4 bg-slate-800/60 
           rounded-xl border border-slate-700/50 cursor-pointer
           hover:bg-slate-700/60 hover:border-brand-500 hover:border-opacity-50 hover:shadow-glow
           active:scale-95 transition-all duration-150
           min-h-[120px];
  }

  /* Numeric Keypad */
  .keypad-btn {
    @apply flex items-center justify-center text-2xl font-bold
           bg-slate-800/80 rounded-xl border border-slate-700
           hover:bg-slate-700 hover:border-slate-600
           active:bg-slate-600 active:scale-95
           transition-all duration-100
           aspect-square;
  }

  /* Status Indicator */
  .status-dot {
    @apply w-2.5 h-2.5 rounded-full;
  }

  .status-online {
    @apply status-dot bg-emerald-500 shadow-lg shadow-emerald-500/50 animate-pulse-soft;
  }

  .status-offline {
    @apply status-dot bg-red-500 shadow-lg shadow-red-500/50;
  }

  .status-syncing {
    @apply status-dot bg-amber-500 shadow-lg shadow-amber-500/50 animate-spin-slow;
  }

  /* Navigation */
  .nav-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400
           hover:bg-slate-800/50 hover:text-white
           transition-all duration-200;
  }

  .nav-item-active {
    @apply nav-item bg-brand-500 bg-opacity-10 text-brand-400 border-l-2 border-brand-500;
  }

  /* Tables */
  .table-container {
    @apply overflow-x-auto rounded-xl border border-slate-700/50;
  }

  .table {
    @apply w-full text-sm;
  }

  .table th {
    @apply px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider
           bg-slate-800/50 border-b border-slate-700;
  }

  .table td {
    @apply px-4 py-3 border-b border-slate-800;
  }

  .table tr:hover td {
    @apply bg-slate-800/30;
  }

  /* Modal */
  .modal-overlay {
    @apply fixed inset-0 bg-black/60 backdrop-blur-sm z-50
           flex items-center justify-center p-4;
  }

  .modal-content {
    @apply bg-slate-850 rounded-2xl border border-slate-700 shadow-2xl
           w-full max-w-lg max-h-[90vh] overflow-auto
           animate-scale-in;
  }

  /* Drawer (Mobile) */
  .drawer {
    @apply fixed inset-y-0 left-0 w-72 bg-slate-900 border-r border-slate-800
           transform -translate-x-full transition-transform duration-300 ease-out
           z-50;
  }

  .drawer-open {
    @apply translate-x-0;
  }

  /* Toast */
  .toast {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg
           border animate-slide-up;
  }

  /* Loading Skeleton */
  .skeleton {
    @apply bg-slate-700/50 animate-pulse rounded;
  }

  /* Divider */
  .divider {
    @apply border-t border-slate-700/50 my-4;
  }

  /* Stat Card */
  .stat-card {
    @apply card p-5;
  }

  .stat-value {
    @apply text-3xl font-bold text-white font-display;
  }

  .stat-label {
    @apply text-sm text-slate-400 mt-1;
  }

  .stat-change {
    @apply text-xs font-medium;
  }

  .stat-change-up {
    @apply stat-change text-emerald-400;
  }

  .stat-change-down {
    @apply stat-change text-red-400;
  }
}

@keyframes fade-slide-up {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@layer utilities {
  .text-gradient {
    @apply bg-gradient-to-r from-brand-400 to-brand-600 bg-clip-text text-transparent;
  }

  .border-gradient {
    border-image: linear-gradient(to right, #d4814b, #c66a3d) 1;
  }

  .glass {
    @apply bg-white/5 backdrop-blur-md border border-white/10;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Safe area para PWA y móvil */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-padding {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }

  /* Marco visible en móvil para dashboard/contenido principal */
  @media (max-width: 767px) {
    .main-content-mobile {
      border: 2px solid #475569;
      border-radius: 1rem;
      margin-left: max(0.5rem, env(safe-area-inset-left));
      margin-right: max(0.5rem, env(safe-area-inset-right));
      margin-bottom: max(1rem, env(safe-area-inset-bottom));
      padding: 0.75rem;
      background: rgba(15, 23, 42, 0.95);
      box-sizing: border-box;
      min-width: 0;
      overflow-x: hidden;
      max-width: 100vw;
    }
    .dashboard-card-mobile {
      border: 3px solid #64748b;
      border-radius: 1rem;
      background: rgba(30, 41, 59, 0.9);
      overflow: hidden;
      box-sizing: border-box;
    }
  }

  /* Touch feedback */
  .touch-feedback {
    @apply active:opacity-70 active:scale-98 transition-all duration-100;
  }
}

/* ========================================
   Animaciones Especiales
   ======================================== */

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

@keyframes rauli-breathe {
  0%, 100% { box-shadow: 0 0 24px rgba(99, 102, 241, 0.22); }
  50% { box-shadow: 0 0 36px rgba(99, 102, 241, 0.4); }
}

@keyframes rauli-grid-fade {
  0%, 100% { opacity: 0.25; }
  50% { opacity: 0.55; }
}

@keyframes rauli-scan {
  0% { transform: translateY(-20%); opacity: 0; }
  25% { opacity: 0.35; }
  100% { transform: translateY(120%); opacity: 0; }
}

@keyframes rauli-pulse {
  0%, 100% { transform: scale(1); box-shadow: 0 0 16px rgba(139, 92, 246, 0.35); }
  50% { transform: scale(1.06); box-shadow: 0 0 26px rgba(99, 102, 241, 0.55); }
}

@keyframes rauli-thinking {
  0%, 100% { filter: hue-rotate(0deg); }
  50% { filter: hue-rotate(35deg); }
}

.rauli-grid {
  background-image: linear-gradient(rgba(148, 163, 184, 0.08) 1px, transparent 1px),
    linear-gradient(90deg, rgba(148, 163, 184, 0.08) 1px, transparent 1px);
  background-size: 30px 30px;
  animation: rauli-grid-fade 6s ease-in-out infinite;
}

.rauli-scanline {
  background: linear-gradient(180deg, transparent 0%, rgba(99, 102, 241, 0.2) 50%, transparent 100%);
  animation: rauli-scan 6s linear infinite;
}

.rauli-breathe {
  animation: rauli-breathe 4s ease-in-out infinite;
}

.rauli-thinking {
  animation: rauli-thinking 3s ease-in-out infinite;
}

.rauli-pulse {
  animation: rauli-pulse 3s ease-in-out infinite;
}

.rauli-icon-btn {
  @apply relative w-12 h-12 rounded-2xl border border-slate-700/60 bg-slate-900/70 text-slate-200
    flex items-center justify-center shadow-lg shadow-slate-900/40 transition-all duration-200
    hover:-translate-y-0.5 hover:scale-105 hover:border-violet-500/60 hover:text-white;
}

/* Números animados (para POS) */
.number-scroll {
  transition: transform 0.15s ease-out;
}

/* Print styles */
@media print {
  body {
    background: white !important;
    color: black !important;
  }

  .no-print {
    display: none !important;
  }
}
