{
  "framework": "vite",
  "installCommand": "npm install",
  "buildCommand": "npm run clean && npm run build",
  "outputDirectory": "dist",
  "functions": {
    "api/version.js": {
      "includeFiles": "api/version.json"
    }
  },
  "rewrites": [
    { "source": "/api/version", "destination": "/api/version" },
    { "source": "/api/:path*", "destination": "https://rauli-panaderia.onrender.com/api/:path*" },
    { "source": "/version.json", "destination": "/version.json" },
    { "source": "/sw.js", "destination": "/sw.js" },
    { "source": "/workbox-:hash.js", "destination": "/workbox-:hash.js" },
    { "source": "/([^.]*)", "destination": "/index.html" }
  ],
  "headers": [
    { "source": "/manifest.webmanifest", "headers": [
      { "key": "Content-Type", "value": "application/manifest+json" },
      { "key": "Cache-Control", "value": "no-store, max-age=0" }
    ]},
    { "source": "/sw.js", "headers": [
      { "key": "Service-Worker-Allowed", "value": "/" },
      { "key": "Cache-Control", "value": "no-store, max-age=0" }
    ]},
    { "source": "/workbox-:hash.js", "headers": [{ "key": "Cache-Control", "value": "no-store, max-age=0" }] },
    { "source": "/", "headers": [{ "key": "Cache-Control", "value": "no-store, no-cache, must-revalidate" }] },
    { "source": "/index.html", "headers": [{ "key": "Cache-Control", "value": "no-store, no-cache, must-revalidate" }] },
    { "source": "/version.json", "headers": [{ "key": "Cache-Control", "value": "no-store, max-age=0" }] },
    { "source": "/assets/(.*)", "headers": [{ "key": "Cache-Control", "value": "no-store, max-age=0, must-revalidate" }] }
  ]
}
